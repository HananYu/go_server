<!doctype html>
<html lang="zh">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Hanan_Yu.Liu</title>
    <link rel="shortcut icon" type="image/x-icon" href="/statics/images/icon.png"/>
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    <link rel="stylesheet" type="text/css" href="/statics/css/index.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="/statics/css/detail.css"/>
</head>

<body class="home blog custom-background round-avatars" itemscope itemtype="http://schema.org/Organization">
<div class="Yarn_Background" style="background-image: url(/statics/images/bg.png);"></div>
<form class="js-search search-form search-form--modal" method="get" action="search" role="search">
    <div class="search-form__inner">
        <div>
            <div id="search-container" class="ajax_search">
                <form method="get" id="searchform">
                    <div class="filter_container"><input type="text" value="" autocomplete="off"
                                                         placeholder="请输入" name="s" id="search-input"/>
                        <ul id="search_filtered" class="search_filtered"></ul>
                    </div>
                    <input type="submit" name="submit" id="searchsubmit" class="searchsubmit" value=""/>
                </form>
            </div>
        </div>
    </div>
</form>
<div class="navi" data-aos="fade-down">
    <div class="bt-nav">
        <div class="line line1"></div>
        <div class="line line2"></div>
        <div class="line line3"></div>
    </div>
    <div class="navbar animated fadeInRight">
        <div class="inner">
            <nav id="site-navigation" class="main-navigation">
                <div id="main-menu" class="main-menu-container">
                    <div class="menu-menu-container">
                        <ul id="primary-menu" class="menu">
                            <li id="menu-item-17"
                                class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17">
                                <a href="index">首页</a>
                            </li>
                            <li id="menu-item-173"
                                class="menu-item menu-item-type-post_type menu-item-object-page menu-item-173">
                                <a href="javascript:void(0);">更新</a>
                            </li>
                            <li id="menu-item-78"
                                class="menu-item menu-item-type-post_type menu-item-object-page menu-item-78">
                                <a href="link">链接</a>
                            </li>
                            <li id="menu-item-252"
                                class="menu-item menu-item-type-post_type menu-item-object-page menu-item-252">
                                <a href="archives">归档</a>
                            </li>
                            <li id="menu-item-57"
                                class="menu-item menu-item-type-post_type menu-item-object-page menu-item-57">
                                <a href="gustbook">留言</a>
                            </li>
                            <li id="menu-item-57"
                                class="menu-item menu-item-type-post_type menu-item-object-page menu-item-57">
                                <a href="article">撰写</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!-- #site-navigation -->
        </div>
    </div>
</div>
<div class="hebin" data-aos="fade-down">
    <i class=" js-toggle-search iconfont">&#xe60e;</i>
</div>
<header id="masthead" class="overlay animated from-bottom" itemprop="brand" itemscope
        itemtype="http://schema.org/Brand">
    <div class="site-branding text-center">
        <a href="index">
            <figure>
                <img class="custom-logo avatar" src=/statics/images/omikron1.png/>
            </figure>
        </a>
        <h3 class="blog-description">
            <p>Hanan_Yu.Liu</p>
        </h3>
    </div>
    <!-- .site-branding -->
    <div class="decor-part">
        <div id="particles-js"></div>
    </div>
    <div class="animation-header">
        <div class="decor-wrapper">
            <svg id="header-decor" class="decor bottom" xmlns="http://www.w3.org/2000/svg" version="1.1"
                 viewBox="0 0 100 100" preserveAspectRatio="none">
                <path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path>
                <path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path>
                <path class="medium left" d="M0 100 L50 50 L0 33.3" fill="rgba(255,255,255, .3)"></path>
                <path class="medium right" d="M100 100 L50 50 L100 33.3" fill="rgba(255,255,255, .3)"></path>
                <path class="small left" d="M0 100 L50 50 L0 66.6" fill="rgba(255,255,255, .5)"></path>
                <path class="small right" d="M100 100 L50 50 L100 66.6" fill="rgba(255,255,255, .5)"></path>
                <path d="M0 99.9 L50 49.9 L100 99.9 L0 99.9" fill="rgba(255,255,255, 1)"></path>
                <path d="M48 52 L50 49 L52 52 L48 52" fill="rgba(255,255,255, 1)"></path>
            </svg>
        </div>
    </div>
</header>
<div id="main" class="content">
    <div class="container">
        <article id="post-1202"
                 class="js-gallery post-1202 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized tag-11 tag-22 tag-29">
            <style>
                .container {
                    padding: 10px 0px;
                }

                .post {
                    margin: 0 auto
                }
            </style>
            <section class="post_content">

            </section>
        </article>
    </div>
    <svg id="upTriangleColor" width="100%" height="40" viewBox="0 0 100 102" preserveAspectRatio="none">
        <path d="M0 0 L50 100 L100 0 Z"></path>
    </svg>
    <div id="social">
        <ul>
            <li>
                <a href="" title="qzone" target="_blank"><i class="iconfont">&#xe67f;</i></a>
            </li>
            <li>
                <a href="" title="weibo" target="_blank"><i class="iconfont">&#xe680;</i></a>
            </li>
            <li>
                <a href="" title="douban" target="_blank"><i class="iconfont">&#xe681;</i></a>
            </li>
            <li>
                <a href="" title="twitter" target="_blank"><i class="iconfont">&#xe683;</i></a>
            </li>
        </ul>
    </div>
    <div id="panel">
        <div class="comment-area">
            <section class="comments">
                <div class="comments-main">
                    <div id="comments-list-title"></div>
                    <div id="loading-comments">
                        <div class="host">
                            <div class="loading loading-0"></div>
                            <div class="loading loading-1"></div>
                            <div class="loading loading-2"></div>
                        </div>
                    </div>
                    <ul class="commentwrap" id="ui-comment">

                    </ul>

                    <div id="respond" class="comment-respond">
                        <h6 id="replytitle" class="comment-reply-title"><a rel="nofollow"
                                                                           id="cancel-comment-reply-link" href=""
                                                                           style="display:none;">取消</a></h6>
                        <div class="clearfix"></div>
                        <div class="author-info">
                            <input type="text" name="author" id="author" placeholder="昵  称 : " value=""
                                   tabindex="1" title="Name (required)"/>
                            <input type="text" name="email" id="email" placeholder="邮  箱 : 可不填" value=""
                                   tabindex="2" title="E-mail(will not be published) required"/>
                            <input type="text" name="phone" id="phone" placeholder="手  机 : 可不填" value=""
                                   tabindex="3" title="Website"/>
                        </div>
                        <div class="clearfix"></div>
                        <input type='hidden' name='comment_post_ID' value='1202' id='comment_post_ID'/>
                        <input type='hidden' name='comment_parent' id='comment_parent' value='0'/>
                        <p style="display: none;"><input type="hidden" id="akismet_comment_nonce"
                                                         name="akismet_comment_nonce" value="632104fca1"/></p>
                        <p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="87"/></p>
                        <div class="comment-form-info">
                            <div class="real-time-gravatar"><img id="real-time-gravatar"
                                                                 src="/statics/images/guest.jpeg"
                                                                 alt="gravatar头像"/>
                            </div>
                            <p class="input-row">
                                <i class="row-icon"></i>
                                <textarea class="text_area" rows="3" cols="80" name="comment" id="comment"
                                          tabindex="4" placeholder="留言......"></textarea>
                                <button name="submit" class="button" id="submit" tabindex="5"
                                        value="发送">发送
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <svg id="dwTriangleColor" width="100%" height="40" viewBox="0 0 100 102" preserveAspectRatio="none">
        <path d="M0 0 L50 100 L100 0 Z"></path>
    </svg>
    <div class="wrapper">
    </div>
</div>

<div class="p-header">
    <figure class="p-image"
            style="background-image: url(/statics/images/bg.png);">
    </figure>
</div>
<div class="navpost-part">
    <div id="NextPrevPosts">

    </div>
</div>

<footer id="footer" class="overlay animated from-top">
    <div class="decor-wrapper">
        <svg id="footer-decor" class="decor top" xmlns="http://www.w3.org/2000/svg" version="1.1"
             viewBox="0 0 100 100" preserveAspectRatio="none">
            <path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path>
            <path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path>
            <path class="medium left" d="M0 0 L50 50 L0 66.6" fill="rgba(255,255,255, .3)"></path>
            <path class="medium right" d="M100 0 L50 50 L100 66.6" fill="rgba(255,255,255, .3)"></path>
            <path class="small left" d="M0 0 L50 50 L0 33.3" fill="rgba(255,255,255, .5)"></path>
            <path class="small right" d="M100 0 L50 50 L100 33.3" fill="rgba(255,255,255, .5)"></path>
            <path d="M0 0 L50 50 L100 0 L0 0" fill="rgba(255,255,255, 1)"></path>
            <path d="M48 48 L50 51 L52 48 L48 48" fill="rgba(255,255,255, 1)"></path>
        </svg>
    </div>
    <div class="cr">&copy;2020. Design by <a href="">Hanan_Yu.Liu</a></div>
    <script type='text/javascript' src='/statics/js/jquery.min.js'></script>
    <script type='text/javascript' src='/statics/js/plugins.js'></script>
    <script type='text/javascript' src='/statics/js/script.js'></script>
    <script type='text/javascript' src='/statics/js/particles.js'></script>
    <script type='text/javascript' src='/statics/js/aos.js'></script>
    <script type='text/javascript' src='/statics/js/prism.js'></script>
    <script type='text/javascript' src='/statics/js/gravatar.js'></script>
    <script type="text/javascript" src="/statics/js/config.js"></script>
    <script src="http://pv.sohu.com/cityjson?ie=utf-8"></script> //通过搜狐获取客户端的IP
    <script>
        let cip = returnCitySN["cip"] //获取当前客户端的IP
        window.onscroll = function () {
            var scrollTop = document.body.scrollTop;
            if (scrollTop >= 200) {
                document.getElementById("NextPrevPosts").style.display = "none"
            } else {
                document.getElementById("NextPrevPosts").style.display = "block"
            }
        }
        $(function () {
            var id = getUrlParam('id');
            $.ajax({
                url: url.baseUrl + "api/article/detail?id=" + id,
                type: 'get',
                contentType: 'application/json;charset=utf-8',
                dateType: 'json',
                async: false,
                success: function (data) {
                    if (data.code == 200) {
                        var obj = data.data.obj;
                        var lastObj = data.data.lastObj;
                        var nextObj = data.data.nextObj;
                        var list = data.data.comList;
                        //详情主体的渲染
                        var strHtml = '<header class="post_header"><h1 class="post_title ">' + obj.title + '</h1></header>' +
                            '<div class="blog-card"><div class="blog-card-thumbnail"><img src="' + obj.img +
                            '" class="blog-card-thumb-image wp-post-image" alt = "" /></div ><div class="blog-card-content"><div class="blog-card-excerpt">' +
                            obj.smallContent + '</div></div></div ><hr /><div class="post-body js-gallery">' + obj.content + '</div >' +
                            '<div class="meta split split--responsive cf"><div class="split__title"><time datetime="2017-10-02 01:44">' + formatDate(obj.createDate) + '</time>' +
                            '<span class="">  ' + obj.typeName + '</span></div >' +
                            '<div id="social-share"></div>' +
                            '<div class="slide"></div></div >';
                        $(".post_content").append(strHtml);
                        //上下两篇文章的渲染
                        let nextHtml = '';
                        if (lastObj.id !== 0) {
                            nextHtml += '<div class="prev" data-aos="slide-right" data-aos-delay="1.5s"><div class="arrow"><i class="iconfont">&#xe625;</i></div >' +
                                '<div class="preview"><div class="pull-left featuredImg" style="background-image:url(' + lastObj.img + ');"></div>' +
                                '<a class="pull-left preview-content bold" href="detail?id=' + lastObj.id + '"><span>' + lastObj.title + '</span></a></div></div>';
                        }
                        if (nextObj.id !== 0) {
                            nextHtml += '<div class="next" data-aos="slide-left" data-aos-delay="1.5s"><div class="arrow"><i class="iconfont">&#xe623;</i></div><div class="preview">' +
                                '<div class="pull-right featuredImg" style="background-image:url(' + nextObj.img + ');"></div>' +
                                '<a class="pull-right preview-content bold" href="detail?id=' + nextObj.id +'"><span>' + nextObj.title + '</span></a></div></div>';
                        }
                        $("#NextPrevPosts").append(nextHtml);

                        //评论区的渲染''
                        $("#comments-list-title").append('<span>' + list.length + '</span> 条评论 '); //评论数量的提交

                        var revHtml = '';
                        for (let res of list) {
                            revHtml += '<li class="comment even thread-even depth-1" id="li-comment-"><div id="comment-969" class="comment_body contents">' +
                                '<div class="profile" style="border-radius:50%;background-color:' + getColor() + ';width:50px;height:50px;text-align:center;line-height:50px;color:#ffffff;font-size:24px">' + res.nikeName.substring(0, 1) + '</div>' +
                                '<div class="main shadow"><div class="commentinfo"><section class="commeta"><div class="shang">' +
                                '<h4 class="author">' + res.nikeName + '</h4></div></section></div><div class="body">' + res.content + '</div >' +
                                '<div class="xia info"><span><time datetime="2018-03-09">' + formatDate(res.createTime) + '</time></span>' +
                                '</div></div></div></li> '
                        }
                        $("#ui-comment").append(revHtml);//添加评论信息
                    } else {
                        alert(data.msg);
                    }
                },
                error: function (e) {
                    console.log(e)
                }
            })

            //提交数据
            $("#submit").click(function () {
                var obj = {};
                obj.aId = parseInt(id);
                obj.nikeName = $("#author").val();
                obj.email = $("#email").val();
                obj.phone = $("#phone").val();
                obj.content = $("#comment").val();
                obj.ip = cip;
                if (!obj.nikeName) {
                    alert("请输入昵称！")
                    return
                }
                if (!obj.content) {
                    alert("请输入评价内容！")
                    return
                }
                if (obj.email) {
                    if (checkEmail(obj.email)) {
                        alert("请输入正确的邮箱！")
                        return
                    }
                }
                if (obj.phone) {
                    if (checkPhone(obj.phone)) {
                        alert("请输入正确的手机号！")
                        return
                    }
                }
                $.ajax({
                    url: url.baseUrl + "api/guestbook/add",
                    type: 'post',
                    contentType: 'application/json;charset=utf-8',
                    dateType: 'json',
                    async: false,
                    data: JSON.stringify(obj),
                    success: function (data) {
                        if (data.code == 200) {
                            location.reload();//刷线当前页面,相当于F5
                        } else {
                            alert(data.msg);
                        }
                    },
                    error: function (e) {
                        // console.log(e)
                    }
                })
            });
        })
    </script>

</body>

</html>